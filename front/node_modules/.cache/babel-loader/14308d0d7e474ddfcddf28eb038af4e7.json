{"ast":null,"code":"import _defineProperty from \"/Users/Broutix/Documents/GitHub/BDF-Reporting-Management/front/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/Broutix/Documents/GitHub/BDF-Reporting-Management/front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/Broutix/Documents/GitHub/BDF-Reporting-Management/front/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/Broutix/Documents/GitHub/BDF-Reporting-Management/front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/Broutix/Documents/GitHub/BDF-Reporting-Management/front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/Broutix/Documents/GitHub/BDF-Reporting-Management/front/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/Broutix/Documents/GitHub/BDF-Reporting-Management/front/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/Broutix/Documents/GitHub/BDF-Reporting-Management/front/src/newUser/NewUser.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport Validators from '../validators/validators';\nimport { Row, Col, Card, Table, Button, Badge, Modal, ModalBody, CustomInput, ModalHeader, Input, FormGroup, ModalFooter } from 'reactstrap';\nimport modify from \"./img/edit.svg\";\nimport deleteimg from \"./img/rubbish-bin.svg\";\nimport plus from \"./img/add.svg\";\nimport './NewUser.css';\n\nvar NewUser =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(NewUser, _Component);\n\n  function NewUser(props) {\n    var _this;\n\n    _classCallCheck(this, NewUser);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(NewUser).call(this, props));\n    _this.state = {\n      users: [],\n      modalNewUser: false,\n      modalEditUser: false,\n      modalDeleteUser: false,\n      currentUser: {}\n    };\n    _this.getValues = _this.getValues.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.createUser = _this.createUser.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(NewUser, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      axios.get(process.env.REACT_APP_API_URL + '/authBDF/getUsers', {\n        headers: {\n          'authtoken': sessionStorage.getItem('token')\n        }\n      }).then(function (res) {\n        var users = res.data;\n\n        _this2.setState({\n          users: users\n        });\n\n        _this2.showUsers();\n      });\n    }\n  }, {\n    key: \"showUsers\",\n    value: function showUsers() {\n      var table = [];\n\n      if (Validators.isDefined(this.state.users.data)) {\n        for (var i = 0; i < Object.keys(this.state.users.data).length; i++) {\n          var user = this.state.users.data[i];\n          table.push(React.createElement(\"tr\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 51\n            },\n            __self: this\n          }, React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 52\n            },\n            __self: this\n          }, \" \", user.login, \" \"), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 53\n            },\n            __self: this\n          }, \" \", user.dateDerniereConnexion, \" \"), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 54\n            },\n            __self: this\n          }, \" \", user.dateCreation, \" \"), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 56\n            },\n            __self: this\n          }, React.createElement(Button, {\n            color: \"warning\",\n            onClick: this.showModal.bind(this, 'modalEditUser', user),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 57\n            },\n            __self: this\n          }, React.createElement(\"img\", {\n            src: modify,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 57\n            },\n            __self: this\n          })), ' ', React.createElement(Button, {\n            color: \"danger\",\n            onClick: this.showModal.bind(this, 'modalDeleteUser', user.login),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 58\n            },\n            __self: this\n          }, React.createElement(\"img\", {\n            src: deleteimg,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 58\n            },\n            __self: this\n          })), ' ')));\n        }\n      }\n\n      return table;\n    }\n  }, {\n    key: \"getValues\",\n    value: function getValues(event, field) {\n      this.setState(_defineProperty({}, field, event.target.value));\n    }\n  }, {\n    key: \"closeModal\",\n    value: function closeModal(tabId) {\n      this.setState(_defineProperty({}, tabId, false));\n    }\n  }, {\n    key: \"showModal\",\n    value: function showModal(modal, user) {\n      var _this$setState3;\n\n      this.setState((_this$setState3 = {}, _defineProperty(_this$setState3, modal, true), _defineProperty(_this$setState3, \"currentUser\", user), _this$setState3));\n    }\n  }, {\n    key: \"createUser\",\n    value: function createUser() {\n      var _this3 = this;\n\n      var fields = {\n        \"login\": this.state.login,\n        \"mdp\": this.state.mdp,\n        \"nivAuth\": this.state.niveauAuth\n      };\n      var inputs = document.querySelectorAll('input, select');\n\n      for (var index = 0; index < inputs.length; ++index) {\n        inputs[index].classList.remove(\"error-input\");\n      }\n\n      var isValid = Validators.fields_not_empty(fields);\n\n      if (isValid === true) {\n        axios.post(process.env.REACT_APP_API_URL + '/authBDF/newUser', {\n          'login': this.state.login,\n          'mdp': this.state.mdp,\n          'niveauAuth': this.state.niveauAuth\n        }, {\n          headers: {\n            'Content-Type': 'application/x-www-form-urlencoded',\n            'authtoken': sessionStorage.getItem('token')\n          }\n        }).then(function (r) {\n          _this3.closeModal(\"modalNewUser\"); // A changer si possible, mauvaise méthode..\n          //eslint-disable-next-line\n\n\n          window.location.reload();\n        }).catch(function (r) {\n          alert(\"L'utilisateur est déjà existant\");\n        });\n      } else {\n        for (var key in isValid) {\n          document.getElementById(isValid[key]).classList.add(\"error-input\");\n        }\n      }\n    }\n  }, {\n    key: \"deleteUser\",\n    value: function deleteUser(user) {\n      var _this4 = this;\n\n      axios.delete(process.env.REACT_APP_API_URL + '/authBDF/deleteUser', {\n        data: {\n          'login': user\n        },\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded',\n          'authtoken': sessionStorage.getItem('token')\n        }\n      }).then(function (r) {\n        _this4.closeModal(\"modalDeleteUser\"); // A changer si possible, mauvaise méthode..\n        //eslint-disable-next-line\n\n\n        window.location.reload();\n      }).catch(function (r) {\n        alert(\"L'utilisateur n'existe pas\");\n      });\n    }\n  }, {\n    key: \"editUser\",\n    value: function editUser(user) {\n      var _this5 = this;\n\n      var fields = {\n        \"login\": document.getElementById(\"login\").value,\n        \"mdp\": document.getElementById(\"mdp\").value,\n        \"nivAuth\": document.getElementById(\"nivAuth\").value\n      };\n      var inputs = document.querySelectorAll('input, select');\n\n      for (var index = 0; index < inputs.length; ++index) {\n        inputs[index].classList.remove(\"error-input\");\n      }\n\n      var isValid = Validators.fields_not_empty(fields);\n\n      if (isValid === true) {\n        axios.put(process.env.REACT_APP_API_URL + '/authBDF/editUser', {\n          \"login\": document.getElementById(\"login\").value,\n          'mdp': document.getElementById(\"mdp\").value,\n          'niveauAuth': document.getElementById(\"nivAuth\").value\n        }, {\n          headers: {\n            'Content-Type': 'application/x-www-form-urlencoded',\n            'authtoken': sessionStorage.getItem('token')\n          }\n        }).then(function (r) {\n          _this5.closeModal(\"modalEditUser\"); // A changer si possible, mauvaise méthode..\n          //eslint-disable-next-line\n\n\n          window.location.reload();\n        }).catch(function (r) {\n          alert(\"L'utilisateur n'existe pas\");\n        });\n      } else {\n        for (var key in isValid) {\n          document.getElementById(isValid[key]).classList.add(\"error-input\");\n        }\n      }\n    } // ----------------------- VUE HTML -----------------------------\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this6 = this;\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, React.createElement(Col, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, \"Gestion des utilisateurs\"))), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }), React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, React.createElement(Col, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }, React.createElement(Button, {\n        color: \"success\",\n        onClick: this.showModal.bind(this, 'modalNewUser'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: plus,\n        className: \"NewUser\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }), \" Nouvel utilisateur\"), ' ')), React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }, React.createElement(Col, {\n        lg: \"8\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, React.createElement(Card, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }, React.createElement(Table, {\n        className: \"Table\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      }, \"Login\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }, \"Derni\\xE8re connexion\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }, \"Date cr\\xE9ation compte\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }, \"Niveau d'authentification\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }, \"Actions \"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      }, this.showUsers()))))), React.createElement(Modal, {\n        isOpen: this.state.modalNewUser,\n        toggle: this.closeModal.bind(this, 'modalNewUser'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }, React.createElement(ModalHeader, {\n        toggle: this.closeModal.bind(this, 'modalNewUser'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }, \"Ajouter un nouvel utilisateur\"), React.createElement(ModalBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }, React.createElement(Input, {\n        onChange: function onChange(evt) {\n          return _this6.getValues(evt, 'login');\n        },\n        name: \"login\",\n        id: \"login\",\n        placeholder: \"Login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      })), React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }, React.createElement(Input, {\n        onChange: function onChange(evt) {\n          return _this6.getValues(evt, 'mdp');\n        },\n        type: \"password\",\n        name: \"password\",\n        id: \"mdp\",\n        placeholder: \"Mot de passe\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      })), React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      }, React.createElement(CustomInput, {\n        onChange: function onChange(evt) {\n          return _this6.getValues(evt, 'niveauAuth');\n        },\n        type: \"select\",\n        id: \"nivAuth\",\n        name: \"nivAuth\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      }, \"Niveau d'authentification\"), React.createElement(\"option\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251\n        },\n        __self: this\n      }, \"1\"), React.createElement(\"option\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252\n        },\n        __self: this\n      }, \"2\"), React.createElement(\"option\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253\n        },\n        __self: this\n      }, \"3\"), React.createElement(\"option\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254\n        },\n        __self: this\n      }, \"4\"), React.createElement(\"option\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255\n        },\n        __self: this\n      }, \"5\"))), React.createElement(ModalFooter, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258\n        },\n        __self: this\n      }, React.createElement(Button, {\n        color: \"success\",\n        className: \"SubmitButton\",\n        onClick: this.createUser,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259\n        },\n        __self: this\n      }, \"Cr\\xE9ation\"), React.createElement(Button, {\n        color: \"warning\",\n        className: \"SubmitButton\",\n        onClick: this.closeModal.bind(this, 'modalNewUser'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260\n        },\n        __self: this\n      }, \"Annuler\")))), React.createElement(Modal, {\n        isOpen: this.state.modalEditUser,\n        toggle: this.closeModal.bind(this, 'modalEditUser'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264\n        },\n        __self: this\n      }, React.createElement(ModalHeader, {\n        toggle: this.closeModal.bind(this, 'modalNewUser'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265\n        },\n        __self: this\n      }, \"\\xC9diter l'utilisateur \", React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266\n        },\n        __self: this\n      }, this.state.currentUser.login)), React.createElement(ModalBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269\n        },\n        __self: this\n      }, React.createElement(Input, {\n        onChange: function onChange(evt) {\n          return _this6.getValues(evt, 'login');\n        },\n        value: this.state.currentUser.login,\n        name: \"login\",\n        id: \"login\",\n        placeholder: \"Login\",\n        disabled: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270\n        },\n        __self: this\n      })), React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        },\n        __self: this\n      }, React.createElement(Input, {\n        onChange: function onChange(evt) {\n          return _this6.getValues(evt, 'mdp');\n        },\n        type: \"password\",\n        name: \"password\",\n        id: \"mdp\",\n        placeholder: \"Nouveau mot de passe\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273\n        },\n        __self: this\n      })), React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275\n        },\n        __self: this\n      }, React.createElement(CustomInput, {\n        onChange: function onChange(evt) {\n          return _this6.getValues(evt, 'niveauAuth');\n        },\n        type: \"select\",\n        id: \"nivAuth\",\n        name: \"nivAuth\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277\n        },\n        __self: this\n      }, \"Niveau d'authentification\"), React.createElement(\"option\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278\n        },\n        __self: this\n      }, \"1\"), React.createElement(\"option\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279\n        },\n        __self: this\n      }, \"2\"), React.createElement(\"option\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280\n        },\n        __self: this\n      }, \"3\"), React.createElement(\"option\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281\n        },\n        __self: this\n      }, \"4\"), React.createElement(\"option\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282\n        },\n        __self: this\n      }, \"5\"))), React.createElement(ModalFooter, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285\n        },\n        __self: this\n      }, React.createElement(Button, {\n        color: \"success\",\n        className: \"SubmitButton\",\n        onClick: this.editUser.bind(this, this.state.currentUser),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286\n        },\n        __self: this\n      }, \"Modifier\"), React.createElement(Button, {\n        color: \"warning\",\n        className: \"SubmitButton\",\n        onClick: this.closeModal.bind(this, 'modalEditUser'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287\n        },\n        __self: this\n      }, \"Annuler\")))), React.createElement(Modal, {\n        isOpen: this.state.modalDeleteUser,\n        toggle: this.closeModal.bind(this, 'modalDeleteUser'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 291\n        },\n        __self: this\n      }, React.createElement(ModalHeader, {\n        toggle: this.closeModal.bind(this, 'modalDeleteUser'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 292\n        },\n        __self: this\n      }, \"Suppression d'un utilisateur\"), React.createElement(ModalBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295\n        },\n        __self: this\n      }, \"\\xCAtes-vous sur de supprimer l'utilisateur \", React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296\n        },\n        __self: this\n      }, \" \", this.state.currentUser, \" \"), \" ?\"), React.createElement(ModalFooter, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 298\n        },\n        __self: this\n      }, React.createElement(Button, {\n        color: \"danger\",\n        className: \"SubmitButton\",\n        onClick: this.deleteUser.bind(this, this.state.currentUser),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299\n        },\n        __self: this\n      }, \"Supprimer\"), React.createElement(Button, {\n        color: \"warning\",\n        className: \"SubmitButton\",\n        onClick: this.closeModal.bind(this, 'modalDeleteUser'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300\n        },\n        __self: this\n      }, \"Annuler\"))));\n    }\n  }]);\n\n  return NewUser;\n}(Component);\n\nexport default NewUser;","map":{"version":3,"sources":["/Users/Broutix/Documents/GitHub/BDF-Reporting-Management/front/src/newUser/NewUser.js"],"names":["React","Component","axios","Validators","Row","Col","Card","Table","Button","Badge","Modal","ModalBody","CustomInput","ModalHeader","Input","FormGroup","ModalFooter","NewUser","props","state","users","modalNewUser","modalEditUser","modalDeleteUser","currentUser","getValues","bind","createUser","get","process","env","REACT_APP_API_URL","headers","sessionStorage","getItem","then","res","data","setState","showUsers","table","isDefined","i","Object","keys","length","user","push","login","dateDerniereConnexion","dateCreation","showModal","modify","deleteimg","event","field","target","value","tabId","modal","fields","mdp","niveauAuth","inputs","document","querySelectorAll","index","classList","remove","isValid","fields_not_empty","post","r","closeModal","window","location","reload","catch","alert","key","getElementById","add","delete","put","plus","evt","editUser","deleteUser"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport Validators from '../validators/validators'\nimport { Row, Col, Card, Table, Button, Badge, Modal, ModalBody, CustomInput, ModalHeader, Input, FormGroup, ModalFooter} from 'reactstrap';\nimport modify from './img/edit.svg';\nimport deleteimg from './img/rubbish-bin.svg';\nimport plus from './img/add.svg';\nimport './NewUser.css';\n\nclass NewUser extends Component {\n    constructor(props){\n        super(props);\n        this.state = {\n            users: [],\n            modalNewUser: false,\n            modalEditUser: false,\n            modalDeleteUser: false,\n            currentUser : {}\n        }\n\n        this.getValues = this.getValues.bind(this);\n        this.createUser = this.createUser.bind(this);\n        \n    }\n\n   \n    componentDidMount() {\n        axios.get(process.env.REACT_APP_API_URL+'/authBDF/getUsers',\n        {\n            headers : {\n                'authtoken' : sessionStorage.getItem('token')\n            }\n        } )\n            .then(res =>  {\n                const users = res.data;\n                this.setState({ users });\n                this.showUsers();\n              });\n        \n        \n    }\n\n    showUsers() {\n\n        let table = []\n\n        if (Validators.isDefined(this.state.users.data)) {\n            for (let i=0; i < Object.keys(this.state.users.data).length; i++) {\n                let user = this.state.users.data[i];\n                table.push(\n                    <tr>\n                        <td> {user.login} </td>\n                        <td> {user.dateDerniereConnexion} </td>\n                        <td> {user.dateCreation} </td>\n                        \n                        <td> \n                            <Button color=\"warning\" onClick={this.showModal.bind(this, 'modalEditUser', user)}><img src={modify} /></Button>{' '}\n                            <Button color=\"danger\" onClick={this.showModal.bind(this, 'modalDeleteUser', user.login)}><img src={deleteimg} /></Button>{' '}\n                        </td>\n                    </tr>);\n            }\n        }\n        \n        \n        return table;\n   \n    }\n\n    getValues(event, field) {\n        this.setState({\n          [field]: event.target.value\n        });\n    }\n\n    closeModal(tabId) {\n        this.setState({\n            [tabId]: false\n        });\n    }\n\n    showModal(modal, user) {\n        this.setState({\n            [modal]: true,\n            \"currentUser\" : user\n        });\n    }\n\n    createUser() {\n        let fields = {\n            \"login\" : this.state.login,\n            \"mdp\" : this.state.mdp,\n            \"nivAuth\" : this.state.niveauAuth,\n        }\n        \n        let inputs = document.querySelectorAll('input, select');\n        for (let index = 0; index < inputs.length; ++index) {\n            inputs[index].classList.remove(\"error-input\");\n        }\n \n        let isValid = Validators.fields_not_empty(fields);\n\n        if (isValid === true) {\n            axios.post(process.env.REACT_APP_API_URL+'/authBDF/newUser', \n                {\n                    'login' : this.state.login,\n                    'mdp' : this.state.mdp, \n                    'niveauAuth' : this.state.niveauAuth\n                },\n                {\n                    headers : {\n                        'Content-Type': 'application/x-www-form-urlencoded',\n                        'authtoken' : sessionStorage.getItem('token')\n                    }\n                } \n                )\n                .then(r => {\n                    this.closeModal(\"modalNewUser\");\n                    // A changer si possible, mauvaise méthode..\n                    //eslint-disable-next-line\n                    window.location.reload();\n                })\n                .catch((r) => {alert(\"L'utilisateur est déjà existant\")});\n            \n        } else {\n            for (var key in isValid) {\n                document.getElementById(isValid[key]).classList.add(\"error-input\");\n            }\n        }\n    }\n\n    deleteUser(user) {\n        axios.delete(process.env.REACT_APP_API_URL+'/authBDF/deleteUser', \n                {   data :     \n                    {\n                        'login' : user,\n                    },\n                    headers : {\n                        'Content-Type': 'application/x-www-form-urlencoded',\n                        'authtoken' : sessionStorage.getItem('token')\n                    }\n                },\n                )\n            .then(r => {\n                this.closeModal(\"modalDeleteUser\");\n                // A changer si possible, mauvaise méthode..\n                //eslint-disable-next-line\n                window.location.reload();\n            })\n            .catch((r) => {alert(\"L'utilisateur n'existe pas\")}); \n    }\n      \n    editUser(user) {\n\n        let fields = {\n            \"login\" : document.getElementById(\"login\").value,\n            \"mdp\" : document.getElementById(\"mdp\").value,\n            \"nivAuth\" : document.getElementById(\"nivAuth\").value,\n        }\n        \n        let inputs = document.querySelectorAll('input, select');\n        for (let index = 0; index < inputs.length; ++index) {\n            inputs[index].classList.remove(\"error-input\");\n        }\n \n        let isValid = Validators.fields_not_empty(fields);\n\n        if (isValid === true) {\n\n        axios.put(process.env.REACT_APP_API_URL+'/authBDF/editUser', \n                     \n                {\n                    \"login\" : document.getElementById(\"login\").value,\n                    'mdp' : document.getElementById(\"mdp\").value, \n                    'niveauAuth' : document.getElementById(\"nivAuth\").value\n                },\n                {\n                    headers : {\n                        'Content-Type': 'application/x-www-form-urlencoded',\n                        'authtoken' : sessionStorage.getItem('token')\n                    }\n                } \n                )\n            .then(r => {\n                this.closeModal(\"modalEditUser\");\n                // A changer si possible, mauvaise méthode..\n                //eslint-disable-next-line\n                window.location.reload();\n            })\n            .catch((r) => {alert(\"L'utilisateur n'existe pas\")}); \n\n            } else {\n                for (var key in isValid) {\n                    document.getElementById(isValid[key]).classList.add(\"error-input\");\n                }\n            }\n    }\n    // ----------------------- VUE HTML -----------------------------\n\n    render() {\n        return (\n            <div>\n                <Row>\n                    <Col>\n                        <h3>\n                            Gestion des utilisateurs\n                        </h3>\n                    </Col>\n                </Row>\n                <hr />\n                <Row>\n                    <Col>\n                        <Button color=\"success\" onClick={this.showModal.bind(this, 'modalNewUser')}><img src={plus} className=\"NewUser\"/> Nouvel utilisateur</Button>{' '}\n                    </Col>\n                </Row>\n                <Row>\n                    <Col lg=\"8\">\n                        <Card>\n                        <Table className=\"Table\">\n                            <thead>\n                            <tr>\n                                <th>Login</th>\n                                <th>Dernière connexion</th>\n                                <th>Date création compte</th>\n                                <th>Niveau d'authentification</th>\n                                <th>Actions </th>\n                            </tr>\n                            </thead>\n                            <tbody>\n                        \n                              {this.showUsers()}\n                            \n                            </tbody>\n                        </Table>\n                        </Card>\n                    </Col>\n                </Row>\n                <Modal isOpen={this.state.modalNewUser} toggle={this.closeModal.bind(this, 'modalNewUser')}>\n                    <ModalHeader toggle={this.closeModal.bind(this, 'modalNewUser')}>\n                        Ajouter un nouvel utilisateur\n                    </ModalHeader>\n                    <ModalBody>\n                        <FormGroup>\n                            <Input onChange={evt => this.getValues(evt, 'login')} name=\"login\" id=\"login\" placeholder=\"Login\" />\n                        </FormGroup>\n                        <FormGroup>\n                            <Input onChange={evt => this.getValues(evt, 'mdp')} type=\"password\" name=\"password\" id=\"mdp\" placeholder=\"Mot de passe\" />\n                        </FormGroup>\n                        <FormGroup>\n                            <CustomInput onChange={evt => this.getValues(evt, 'niveauAuth')} type=\"select\" id=\"nivAuth\" name=\"nivAuth\">\n                                <option value=\"\">Niveau d'authentification</option>\n                                <option>1</option>\n                                <option>2</option>\n                                <option>3</option>\n                                <option>4</option>\n                                <option>5</option>\n                            </CustomInput>\n                        </FormGroup>\n                        <ModalFooter>\n                            <Button color=\"success\" className=\"SubmitButton\" onClick={this.createUser}>Création</Button>\n                            <Button color=\"warning\" className=\"SubmitButton\" onClick={this.closeModal.bind(this, 'modalNewUser')}>Annuler</Button>\n                        </ModalFooter>\n                    </ModalBody>\n                </Modal>\n                <Modal isOpen={this.state.modalEditUser} toggle={this.closeModal.bind(this, 'modalEditUser')}>\n                    <ModalHeader toggle={this.closeModal.bind(this, 'modalNewUser')}>\n                            Éditer l'utilisateur <b>{this.state.currentUser.login}</b>\n                    </ModalHeader>\n                    <ModalBody>\n                        <FormGroup>\n                            <Input onChange={evt => this.getValues(evt, 'login')} value={this.state.currentUser.login} name=\"login\" id=\"login\" placeholder=\"Login\" disabled/>\n                        </FormGroup>\n                        <FormGroup>\n                            <Input onChange={evt => this.getValues(evt, 'mdp')} type=\"password\" name=\"password\" id=\"mdp\" placeholder=\"Nouveau mot de passe\" />\n                        </FormGroup>\n                        <FormGroup>\n                            <CustomInput onChange={evt => this.getValues(evt, 'niveauAuth')} type=\"select\" id=\"nivAuth\" name=\"nivAuth\">\n                                <option value=\"\">Niveau d'authentification</option>\n                                <option>1</option>\n                                <option>2</option>\n                                <option>3</option>\n                                <option>4</option>\n                                <option>5</option>\n                            </CustomInput>\n                        </FormGroup>\n                        <ModalFooter>\n                            <Button color=\"success\" className=\"SubmitButton\" onClick={this.editUser.bind(this, this.state.currentUser)}>Modifier</Button>\n                            <Button color=\"warning\" className=\"SubmitButton\" onClick={this.closeModal.bind(this, 'modalEditUser')}>Annuler</Button>\n                        </ModalFooter>\n                    </ModalBody>\n                </Modal>\n                <Modal isOpen={this.state.modalDeleteUser} toggle={this.closeModal.bind(this, 'modalDeleteUser')}>\n                    <ModalHeader toggle={this.closeModal.bind(this, 'modalDeleteUser')}>\n                        Suppression d'un utilisateur\n                    </ModalHeader>\n                    <ModalBody>\n                        Êtes-vous sur de supprimer l'utilisateur <b> {this.state.currentUser} </b> ?\n                    </ModalBody>\n                    <ModalFooter>\n                        <Button color=\"danger\" className=\"SubmitButton\" onClick={this.deleteUser.bind(this, this.state.currentUser)}>Supprimer</Button>\n                        <Button color=\"warning\" className=\"SubmitButton\" onClick={this.closeModal.bind(this, 'modalDeleteUser')}>Annuler</Button>\n                    </ModalFooter>\n                    \n                </Modal>\n            </div>\n        )\n    }\n}\n\n\nexport default NewUser;"]},"metadata":{},"sourceType":"module"}