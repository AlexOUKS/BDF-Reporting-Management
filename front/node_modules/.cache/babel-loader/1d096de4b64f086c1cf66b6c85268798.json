{"ast":null,"code":"import _classCallCheck from \"/Users/Broutix/Documents/GitHub/BDF-Reporting-Management/front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/Broutix/Documents/GitHub/BDF-Reporting-Management/front/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/Broutix/Documents/GitHub/BDF-Reporting-Management/front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/Broutix/Documents/GitHub/BDF-Reporting-Management/front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/Broutix/Documents/GitHub/BDF-Reporting-Management/front/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/Broutix/Documents/GitHub/BDF-Reporting-Management/front/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/Broutix/Documents/GitHub/BDF-Reporting-Management/front/src/auth/Auth.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport logo from '../img/bdf.jpg';\nimport lock from './img/lock.png';\nimport user from './img/user.png';\nimport './Auth.css';\nimport { Button, FormGroup, Label, Input, Alert } from 'reactstrap';\n\nvar Auth =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Auth, _Component);\n\n  function Auth(props) {\n    var _this;\n\n    _classCallCheck(this, Auth);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Auth).call(this, props));\n    _this.state = {\n      login: '',\n      mdp: '',\n      loginError: false\n    };\n    _this.loginChange = _this.loginChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.mdpChange = _this.mdpChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.login = _this.login.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Auth, [{\n    key: \"loginChange\",\n    value: function loginChange(event) {\n      this.setState({\n        login: event.target.value\n      });\n    }\n  }, {\n    key: \"mdpChange\",\n    value: function mdpChange(event) {\n      this.setState({\n        mdp: event.target.value\n      });\n    }\n  }, {\n    key: \"login\",\n    value: function login(e) {\n      var _this2 = this;\n\n      if (e.key === 'Enter' || e.type === 'click') {\n        axios.post(process.env.REACT_APP_API_URL + '/authBDF/login', {\n          'login': this.state.login,\n          'mdp': this.state.mdp\n        }, {\n          headers: {\n            'Content-Type': 'application/x-www-form-urlencoded'\n          }\n        }).then(function (r) {\n          return _this2.loginOk(r);\n        }).catch(function (r) {\n          return _this2.loginFail(r);\n        });\n      }\n    }\n  }, {\n    key: \"loginOk\",\n    value: function loginOk(response) {\n      sessionStorage.setItem('token', response.data.token);\n      sessionStorage.setItem('lvl', response.data.lvl);\n      this.setState({\n        loginError: false\n      }); // A changer si possible, mauvaise méthode..\n      //eslint-disable-next-line\n\n      window.location.reload();\n    }\n  }, {\n    key: \"loginFail\",\n    value: function loginFail(response) {\n      this.setState({\n        loginError: true\n      });\n    } // ----------------------- VUE HTML -----------------------------\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"Auth\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"AuthRightBlock\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"LoginBlock\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, this.state.loginError ? React.createElement(Alert, {\n        color: \"danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, \"Identifiants incorrects\") : '', React.createElement(\"div\", {\n        className: \"InnerBlockLogin\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        className: \"ImgLoginBlock\",\n        src: user,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }), React.createElement(Label, {\n        for: \"exampleEmail\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, \"Login\"), React.createElement(Input, {\n        onChange: this.loginChange,\n        onKeyPress: this.login,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      })), React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        className: \"ImgLoginBlock\",\n        src: lock,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }), React.createElement(Label, {\n        for: \"examplePassword\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, \"Mot de passe\"), React.createElement(Input, {\n        onChange: this.mdpChange,\n        onKeyPress: this.login,\n        type: \"password\",\n        name: \"password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      })), React.createElement(Button, {\n        onClick: this.login,\n        className: \"ButtonLogin\",\n        outline: true,\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, \"Connexion\"), ' '))), React.createElement(\"div\", {\n        className: \"AuthLeftBlock\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        className: \"ImgLogo\",\n        src: logo,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return Auth;\n}(Component);\n\nexport default Auth;","map":{"version":3,"sources":["/Users/Broutix/Documents/GitHub/BDF-Reporting-Management/front/src/auth/Auth.js"],"names":["React","Component","axios","logo","lock","user","Button","FormGroup","Label","Input","Alert","Auth","props","state","login","mdp","loginError","loginChange","bind","mdpChange","event","setState","target","value","e","key","type","post","process","env","REACT_APP_API_URL","headers","then","r","loginOk","catch","loginFail","response","sessionStorage","setItem","data","token","lvl","window","location","reload"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport logo from '../img/bdf.jpg';\nimport lock from './img/lock.png';\nimport user from './img/user.png';\nimport './Auth.css';\nimport { Button, FormGroup, Label, Input, Alert} from 'reactstrap';\n\nclass Auth extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      login: '',\n      mdp: '',\n      loginError :  false,\n    };\n\n    this.loginChange = this.loginChange.bind(this);\n    this.mdpChange = this.mdpChange.bind(this);\n    this.login = this.login.bind(this);\n    \n  }\n\n  loginChange(event) {\n    this.setState({login: event.target.value});\n  }\n\n  mdpChange(event) {\n    this.setState({mdp: event.target.value});\n  }\n\n  \n  login(e) {\n    if(e.key === 'Enter' || e.type === 'click'){\n      axios.post(process.env.REACT_APP_API_URL+'/authBDF/login', \n        {'login' : this.state.login,\n          'mdp' : this.state.mdp, \n        },\n        {\n          headers : {\n            'Content-Type': 'application/x-www-form-urlencoded'\n          }\n        } \n        )\n        .then(r => this.loginOk(r))\n        .catch(r => this.loginFail(r));\n      }\n  }\n\n  loginOk(response) {\n    sessionStorage.setItem('token', response.data.token);\n    sessionStorage.setItem('lvl', response.data.lvl);\n    this.setState({loginError : false});\n    // A changer si possible, mauvaise méthode..\n    //eslint-disable-next-line\n    window.location.reload();\n  }\n\n  loginFail(response) {\n    this.setState({loginError : true});\n  }\n\n  // ----------------------- VUE HTML -----------------------------\n\n  render() {\n    return (\n      <div className=\"Auth\">\n        <div className=\"AuthRightBlock\">\n          <div className=\"LoginBlock\">\n          {this.state.loginError ? <Alert color=\"danger\" >\n              Identifiants incorrects\n            </Alert> : '' }\n            \n            <div className=\"InnerBlockLogin\"> \n              <FormGroup>\n                <img className=\"ImgLoginBlock\" src={user} />\n                <Label for=\"exampleEmail\">Login</Label>\n                <Input onChange={this.loginChange} onKeyPress={this.login}></Input>\n              </FormGroup>\n              <FormGroup>\n                <img className=\"ImgLoginBlock\" src={lock} />\n                <Label for=\"examplePassword\">Mot de passe</Label>\n                <Input onChange={this.mdpChange} onKeyPress={this.login} type=\"password\" name=\"password\" />\n              </FormGroup>\n              <Button  onClick={this.login} className=\"ButtonLogin\"  outline color=\"primary\">Connexion</Button>{' '}\n            </div>\n          </div>\n        </div>\n        <div className=\"AuthLeftBlock\">\n            <img className=\"ImgLogo\" src={logo} />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Auth;\n"]},"metadata":{},"sourceType":"module"}